<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Words</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Toggle Mode -->
    <div class="toggle-container">
        <button id="toggleMode">ðŸŒ™</button>
    </div>

    <div class="container">
        <h1 class="title">Search Words</h1>

        <input type="text" id="searchInput" placeholder="Search words..." autocomplete="off">

        <div id="results"></div>
    </div>

<script>
    let darkMode = false;

    // Toggle Light/Dark Mode
    document.getElementById("toggleMode").addEventListener("click", () => {
        darkMode = !darkMode;
        document.body.classList.toggle("dark");
        document.getElementById("toggleMode").textContent = darkMode ? "â˜€ï¸" : "ðŸŒ™";
    });

    // Load words.json
    let wordsList = [];

    fetch("words.json")
        .then(res => res.json())
        .then(data => {
            wordsList = data.words;
        });

    // Search Function
    const input = document.getElementById("searchInput");
    const resultsBox = document.getElementById("results");

    input.addEventListener("input", () => {
        const query = input.value.toLowerCase();
        resultsBox.innerHTML = "";

        if (query.length === 0) return;

        const filtered = wordsList.filter(word => word.toLowerCase().startsWith(query));

        filtered.forEach(word => {
            const item = document.createElement("div");
            item.className = "result-item";

            item.innerHTML = `
                <button class="word-btn">${word}</button>
                <button class="copy-btn" data-word="${word}">Salin</button>
            `;

            resultsBox.appendChild(item);
        });

        // Copy function
        document.querySelectorAll(".copy-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                navigator.clipboard.writeText(btn.dataset.word);
                btn.textContent = "Tersalin!";
                setTimeout(() => btn.textContent = "Salin", 1000);
            });
        });
    });
</script>

</body>
</html>
    return [...starts, ...contains];
}

// === COPY TO CLIPBOARD ===
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        alert("Copied: " + text);
    });
}

// === UPDATE RESULTS ===
document.getElementById("search").addEventListener("input", function() {
    const query = this.value.trim();
    const box = document.getElementById("results");
    box.innerHTML = "";

    if (!query) return;

    const result = searchWords(query);

    if (result.length === 0) {
        box.innerHTML = `<div class="item" style="color:#777">Tidak ada hasil</div>`;
        return;
    }

    result.forEach(word => {
        const row = document.createElement("div");
        row.className = "item";

        const text = document.createElement("span");
        text.textContent = word;

        const button = document.createElement("button");
        button.className = "copy-btn";
        button.textContent = "Copy";
        button.onclick = () => copyToClipboard(word);

        row.appendChild(text);
        row.appendChild(button);

        box.appendChild(row);
    });
});
</script>

</body>
</html>
